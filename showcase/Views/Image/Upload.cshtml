@{
    ViewData["Title"] = "Upload";
}

<h1>Upload Image</h1>

<form asp-action="Upload" enctype="multipart/form-data">
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="Name">Name</label>
                <input type="text" class="form-control" id="Name" name="Name" />
            </div>
            <div class="form-group">
                <label for="AltText">Description</label>
                <textarea class="form-control" id="AltText" name="AltText"></textarea>
            </div>
            <div class="form-group">
                <label for="FormFile">Image File</label>
                <label class="custom-file">
                    <input type="file" id="FormFile" name="FormFile" class="custom-file-input" onchange="loadImage(event)" accept="image/*" />
                    <span class="custom-file-label">Choose file</span>
                </label>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label>Image Preview</label>
                <img class="img-thumbnail" id="imagePreview" style="width: 100%; height: auto;" />
            </div>
        </div>
    </div>
    <input type="submit" class="btn btn-success" value="Upload" />
    <a asp-action="Manage" class="btn btn-secondary">Cancel</a>
</form>

@section scripts {
    <script>
        function loadImage(event) {
            $("#imagePreview")
                .attr("src", URL.createObjectURL(event.target.files[0]))
                .attr("alt", $("#AltText").val())
                .attr("title", $("#AltText").val());
        }
    </script>
}